<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=true"> -->
  <!-- <meta name="viewport" content="initial-scale=0.3, maximum-scale=1, minimum-scale=1, width=device-width, user-scalable=no"> -->
  <title></title>
  <style>
    *{
      -webkit-text-size-adjust: none;
    }
    body, html{
      /* transform: scale(0.3); */
    }
  </style>
</head>
<body>
  <script>
    console.log(' 页面加载 onload  ===================================  ： ', document.getElementsByTagName('body')[0])
    const isMobileListener = (cb) => {
      let userAgent = navigator.userAgent.toLowerCase();
      if (
        /ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(
          userAgent,
        )
      ) {
        console.log('前端是移动端');
        document.getElementsByTagName('body')[0].style.zoom = 0.8
      } else {
        console.log('前端是pc端');
      }
    }
    isMobileListener();
    (function (doc, win) {
      var scale = 1.0;
      var ratio = 1;
      if (window.devicePixelRatio == 2) {
        scale *= 0.5;
        ratio *= 2;
      }
      if (window.devicePixelRatio == 3) {
        scale *= (1/3);
        ratio *= 3;
      }
      var text = '<meta name="viewport" content="initial-scale=' + scale + ', maximum-scale=' + scale + ',' + ' minimum-scale=' + scale + ', width=device-width,' + ' user-scalable=no" />';
      document.write(text);

      var docEl = doc.documentElement
      var resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize'
      var recalc = function () {
        var clientWidth = docEl.clientWidth
        if (!clientWidth) return
          docEl.style.fontSize = 100 * (clientWidth / 750)  + 'px'
      }

      if (!doc.addEventListener) return
      recalc()
      win.addEventListener(resizeEvt, recalc, false)
      // doc.addEventListener('DOMContentLoaded', recalc, false)
    })(document, window);
    // zoom: 0.5;
  </script>
</body>
</html>
